---
title: "applybyname-vignette"
author: "Matthew Kuperus Heun"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(magrittr)
library(dplyr)
library(byname)
```

## Introduction

The `byname` package provides many useful functions for "by name" manipulation of
matrices, lists of matrices, and matrices in columns of data frames.
However, the built-in functions may not cover all possible needs.
`byname` provides three functions for these situations:

| Function | Purpose    
|--:|:------------------------------------
| `unaryapply_byname` | apply a unary function to a single matrix, a list of matrices, or a column of matrices in a data frame  
| `binaryapply_byname` | apply a binary function to two matrices or Map a binary function across two lists of matrices or two columns of matrices in a data frame
| `cumapply_byname` | apply a binary function cumulatively to a singe list of matrices or a column of matrices in a data frame


## How the `*apply_byname` functions work

The `*apply_byname` functions have several arguments.

| Argument | Description
|--:|:------------------------------
`FUN` | a unary function in the case of `unaryapply_byname`, a binary function (that may also accept a single argument) in the case of `binaryapply_byname`, and a binary function (that must also accept only a single argument) in the case of `cumapply_byname`
`a` | a matrix, a list or matrices, or a column of matrices in a data frame
`b` | a matrix, a list or matrices, or a column of matrices in a data frame
`.FUNdots` | a named list of arguments to be passed to `FUN`
 `rowcoltypes` | tells what to do with row and column types
 `match_type` | tells how row and column types of `a` and `b` arguments must be matched
 `.organize` | tells whether to automatically "complete" `a` and `b` relative to each other and sort the rows and columns of the completed matrices

`FUN` is applied as expected over `a` (in the case of `unaryapply_byname` and `cumapply_byname`) 
or over `a` and `b` (in the case of `binaryapply_byname`).
`FUN` should assume that its `a` and/or `b` arguments are single numbers or matrices; 
`*apply_byname` handles all mapping across lists.
The following sections describe each `*apply_byname` function.


## `unaryapply_byname`

`unaryapply_byname` applies `FUN` to a single matrix, a list of matrices, or 
(if used with `dplyr::mutate`) a column in a data frame that contains matrices.
The `rowcoltypes` argument must be one of the following:

| `rowcoltypes` value | Behaviour
|--:|:---------------------------------
`"all"` | transfer both row and column types of \code{a} directly to output
`"transpose"` | rowtype of \code{a} becomes coltype of output; coltype of \code{a} becomes rowtype of output
`"row"` | rowtype of \code{a} becomes both rowtype and coltype of output
`"col"` | coltype of \code{a} becomes both rowtype and coltype of output
`"none"` | rowtype and coltype not set by this function; \code{FUN} will set rowtype and coltype

A simple example follows.

```{r}
U <- matrix(1:4, ncol = 2, dimnames = list(c("p1", "p2"), c("i1", "i2"))) %>%
  setrowtype("Products") %>% setcoltype("Industries")
U
difference_byname(0, U)
unaryapply_byname(`-`, U)
```


## `binaryapply_byname`




## `cumapply_byname`



## Summary
